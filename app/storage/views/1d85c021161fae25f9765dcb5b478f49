<?php $__env->startSection('pagescripts'); ?>
<?php echo HTML::script('assets/global/scripts/sys.js'); ?>

<script>
	 <?php /*$('#userregistration').bootstrapValidator({*/ ?>
        <?php /*fields: {*/ ?>
            <?php /*username: {*/ ?>
                <?php /*validators: {*/ ?>
                    <?php /*remote: {*/ ?>
                        <?php /*message: 'Email already taken',*/ ?>
                        {{--url: "<?php echo CONST_SITELINK.'usernameavalibility'?>",--}}
                        <?php /*delay: 2000*/ ?>
                    <?php /*}*/ ?>
                <?php /*}*/ ?>
            <?php /*}*/ ?>
        <?php /*}*/ ?>
    <?php /*});*/ ?>
</script>
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
<div class="portlet light bordered">
	<div class="portlet-title">
		<div class="caption font-green-seagreen">
			<i class="fa fa-cogs"></i>
			<span class="caption-subject">User</span>
		</div>
	</div>
	<?php echo Form::open(array('url' => 'sys/muser','role'=>'form','id'=>'userregistration')); ?>

	<div class="portlet-body form">
		<div class="form-body">
			<div class="row">
				<div class="col-md-4 col-sm-12 col-xs-12">
					<?php foreach($users as $user): ?>
						 <div class="form-group">
			                <?php echo Form::hidden('Id',$user->Id); ?>

			                <?php echo Form::label('FullName','Name of User'); ?>

			                <?php echo Form::text('FullName',$user->FullName,array('class'=>'form-control required')); ?>

			            </div>
			    		<div class="form-group">
			    			<label for="username">Email (<i class="font-red">Used for signing in to the system</i>)</label>
			    		    <?php echo Form::text('username',$user->username,array('class'=>'form-control email required')); ?>

			    		</div>
			    		<?php if(empty($user->Id)): ?>
			    			<input type="hidden" name="IsInsert" value="1" />
			                <div class="form-group">
			        		    <?php echo Form::label('password', 'Password'); ?>

			        	        <input name="password" id="password" type="password" class="form-control required password" />
			        		</div>
			        		<div class="form-group">
			        			<?php echo Form::label('password_confirmation', 'Re-type Password'); ?>

			        	        <input name="password_confirmation" type="password" class="form-control required confirmpassword" />
			        		</div>
			            <?php endif; ?>
			            <div class="form-group">
			            	<label>Status</label>
							<div class="radio-list">
								<label class="radio-inline">
								<input type="radio" name="Status" id="optionsRadios4" value="1"  <?php if($user->Status=="1" || empty($user->Status)): ?>checked="checked"<?php endif; ?>> Active </label>
								<label class="radio-inline">
								<input type="radio" name="Status" id="optionsRadios5" value="0" <?php if($user->Status=="0"): ?>checked="checked"<?php endif; ?>> In-Active </label>
							</div>
			            </div>
					<?php endforeach; ?>
				</div>
				<div class="col-md-8 col-sm-12 col-xs-12">
					<div class="table-responsive">
						<h5 class="font-blue-madison bold">Assign a role to the user by ticking on the checkbox</h5>
						<table id="systemrolemenumap" class="table table-condensed table-striped table-bordered table-hover table-responsive">
							<thead>
								<tr>
									<th width="5%"></th>
									<th>Role</th>
									<th>User For</th>
								</tr>
							</thead>
							<tbody>
								<?php foreach($roles as $role): ?>
								<?php $randomKey=randomString();?>
				                <tr>
				                    <td class="text-center">
				                        <input type="checkbox" name="sauserrolemap[<?php echo $randomKey; ?>][SysRoleId]" value="<?php echo $role->Id; ?>" class="addrowcheckboxsinglecheck" <?php if($role->Selected==1): ?>checked="checked"<?php endif; ?>/>
				                    </td>
				                    <td>
				                    	<?php echo $role->Name; ?>

				                    </td>
				                    <td>
				                    	<?php if((int)$role->ReferenceNo==2): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpContractorId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($contractors as $contractor): ?>
				                    		<option value="<?php echo $contractor->Id; ?>"><?php echo $contractor->NameOfFirm; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>

                                        <?php /*<div class="ui-widget">*/ ?>
                                            <?php /*<input type="hidden" class="contractor-id" name="CrpContractorId" />*/ ?>
                                            <?php /*<input id="userfor-<?php echo $role->ReferenceNo; ?>" type="text" name="Contractor" placeholder="Type Contractor Name" class="form-control tablerowcontrol contractor-autocomplete" disabled="disabled"/>*/ ?>
                                        <?php /*</div>*/ ?>
				                    	<?php endif; ?>
				                    	<?php if((int)$role->ReferenceNo==3): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpConsultantId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($consultants as $consultant): ?>
				                    		<option value="<?php echo $consultant->Id; ?>"><?php echo $consultant->NameOfFirm; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
                                        <?php /*<div class="ui-widget">*/ ?>
                                            <?php /*<input type="hidden" class="consultant-id" name="CrpConsultantId"/>*/ ?>
                                            <?php /*<input id="userfor-<?php echo $role->ReferenceNo; ?>" type="text" name="Consultant" placeholder="Type Consultant Name" class="form-control tablerowcontrol consultant-autocomplete" disabled="disabled"/>*/ ?>
                                        <?php /*</div>*/ ?>
				                    	<?php endif; ?>
				                    	<?php if((int)$role->ReferenceNo==4): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpArchitectId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($architects as $architect): ?>
				                    		<option value="<?php echo $architect->Id; ?>"><?php echo $architect->Name; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
				                    	<?php endif; ?>
				                    	<?php if((int)$role->ReferenceNo==5): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpSpecializedTradeId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($specializedTrades as $specializedTrade): ?>
				                    		<option value="<?php echo $specializedTrade->Id; ?>"><?php echo $specializedTrade->Name; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
				                    	<?php endif; ?>
				                    	<?php if((int)$role->ReferenceNo==6): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpEngineerId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($engineers as $engineers): ?>
				                    		<option value="<?php echo $engineers->Id; ?>"><?php echo $engineers->Name; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
				                    	<?php endif; ?>
				                
										<?php if((int)$role->ReferenceNo==10): ?>
				                    	<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpSurveyId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($surveyors as $surveyor): ?>
				                    		<option value="<?php echo $surveyor->Id; ?>"><?php echo $surveyor->Name; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
				                    	<?php endif; ?>
								<?php if((int)$role->ReferenceNo==9): ?>
								<select id="userfor-<?php echo $role->ReferenceNo; ?>" name="CrpSpecializedTradeId" class="form-control select2me tablerowcontrol" disabled="disabled">
				                    		<option value="">---SELECT ONE---</option>
				                    		<?php foreach($specializedfirms as $specializedfirm): ?>
				                    		<option value="<?php echo $specializedfirm->Id; ?>"><?php echo $specializedfirm->NameOfFirm; ?></option>
				                    		<?php endforeach; ?>
				                    	</select>
				                    	<?php endif; ?>
				                    </td>
				                </tr>
				                <?php endforeach; ?>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="form-actions">
			<div class="btn-set">
				<button type="submit" class="btn green">Save</button>
				<a href="<?php echo Request::url(); ?>" class="btn red">Cancel</a>
			</div>
		</div>
	</div>
	<?php echo Form::close(); ?>

</div>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>