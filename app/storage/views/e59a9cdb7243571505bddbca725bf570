<?php $__env->startSection('pagescripts'); ?>
<?php echo HTML::script('assets/global/scripts/sys.js'); ?>

<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>
<div class="portlet light bordered">
	<div class="portlet-title">
		<div class="caption font-green-seagreen">
			<i class="fa fa-cogs"></i>
			<span class="caption-subject">Role</span>
		</div>
	</div>
	<?php echo Form::open(array('url' => 'sys/mrole','role'=>'form','id'=>'roleregistration')); ?>

	<div class="portlet-body form">
		<div class="form-body">
			<div class="row">
				<?php foreach($roles as $role): ?>
				<div class="col-md-4">
					<?php echo Form::hidden('Id',$role->Id); ?>

					<div class="form-group">
						<?php echo Form::label('Name','Name'); ?>

					    <?php echo Form::text('Name',$role->Name,array('class'=>'form-control required')); ?>

					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<?php echo Form::label('Description','Description'); ?>

					     <input type="text" class="form-control" name="Description" value="<?php echo $role->Description; ?>">
					</div>
				</div>
				<?php endforeach; ?>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="table-responsive">
					<h5 class="font-blue-hoki bold">Pages</h5>
						<table id="sysrolemenumap" class="table table-condensed table-striped table-bordered table-hover table-responsive">
							<thead>
								<tr>
									<th>Module</th>
									<th>Page</th>
									<th width="5%">View</th>
								</tr>
							</thead>
							<tbody>
								<?php $lastMenuTitle="";$lastMenuDisplayType="";?>
								<?php foreach($roleMenuMaps as $roleMenuMap): ?>
									<?php if((int)$roleMenuMap->MenuDisplayType==1): ?>
									<tr <?php if($roleMenuMap->MenuGroupTitle!=$lastMenuTitle): ?> class="success" <?php endif; ?>>
										<td>
											<?php if($roleMenuMap->MenuGroupTitle!=$lastMenuTitle): ?>
					        					<b class="text-info"><i class="<?php echo $roleMenuMap->Icon; ?>"></i>&nbsp;<?php echo $roleMenuMap->MenuGroupTitle; ?></b>
					        				<?php endif; ?>
						        		</td>
						        		<td>
						                    <?php echo $roleMenuMap->MenuTitle; ?>

						                    <input type="hidden" class="menuid" name="systemrolemenumap[<?php echo $roleMenuMap->Id; ?>][SysMenuId]" value="<?php echo $roleMenuMap->Id; ?>" <?php if($roleMenuMap->PageView!=1): ?>disabled="disabled"<?php endif; ?> />
						                </td>
						        		<td class="text-center"><input type="checkbox" name="systemrolemenumap[<?php echo $roleMenuMap->Id; ?>][PageView]" value="1" class="checkall" <?php if($roleMenuMap->PageView==1): ?>checked="checked"<?php endif; ?> class="checkinput"/></td>
					        		</tr>
					        		<?php $lastMenuTitle=$roleMenuMap->MenuGroupTitle;$lastMenuDisplayType=$roleMenuMap->MenuDisplayType; ?>
				        			<?php endif; ?>
				        		<?php endforeach; ?>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-md-6">
					<div class="table-responsive">
					<h5 class="font-blue-hoki bold">Reports</h5>
						<table id="sysrolemenumap" class="table table-condensed table-striped table-bordered table-hover table-responsive">
							<thead>
								<tr>
									<th>Module</th>
									<th>Report</th>
									<th width="5%">View</th>
								</tr>
							</thead>
							<tbody>
								<?php $lastMenuTitle="";$lastMenuDisplayType="";?>
								<?php foreach($roleMenuMaps as $roleMenuMap): ?>
									<?php if((int)$roleMenuMap->MenuDisplayType==2): ?>
									<tr <?php if($roleMenuMap->MenuGroupTitle!=$lastMenuTitle): ?> class="success" <?php endif; ?>>
										<td>
											<?php if($roleMenuMap->MenuGroupTitle!=$lastMenuTitle): ?>
					        					<b class="text-info"><i class="<?php echo $roleMenuMap->Icon; ?>"></i>&nbsp;<?php echo $roleMenuMap->MenuGroupTitle; ?></b>
					        				<?php endif; ?>
						        		</td>
						        		<td>
						                    <?php echo $roleMenuMap->MenuTitle; ?>

						                    <input type="hidden" class="menuid" name="systemrolemenumap[<?php echo $roleMenuMap->Id; ?>][SysMenuId]" value="<?php echo $roleMenuMap->Id; ?>" <?php if($roleMenuMap->PageView!=1): ?>disabled="disabled"<?php endif; ?> />
						                </td>
						        		<td class="text-center"><input type="checkbox" name="systemrolemenumap[<?php echo $roleMenuMap->Id; ?>][PageView]" value="1" class="checkall" <?php if($roleMenuMap->PageView==1): ?>checked="checked"<?php endif; ?> class="checkinput"/></td>
					        		</tr>
					        		<?php $lastMenuTitle=$roleMenuMap->MenuGroupTitle;$lastMenuDisplayType=$roleMenuMap->MenuDisplayType; ?>
				        			<?php endif; ?>
				        		<?php endforeach; ?>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div class="form-actions">
			<div class="btn-set">
				<button type="submit" class="btn green">Save</button>
				<a href="<?php echo URL::to('sys/role'); ?>" class="btn red">Cancel</a>
			</div>
		</div>
	</div>
	<?php echo Form::close(); ?>

</div>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>